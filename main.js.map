{"version":3,"file":"main.js","mappings":"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","sources":["webpack://ajs-diploma/./src/js/GamePlay.js","webpack://ajs-diploma/./src/js/utils.js","webpack://ajs-diploma/./src/js/themes.js","webpack://ajs-diploma/./src/js/cursors.js","webpack://ajs-diploma/./src/js/Character.js","webpack://ajs-diploma/./src/js/characters/Bowman.js","webpack://ajs-diploma/./src/js/characters/Swordsman.js","webpack://ajs-diploma/./src/js/characters/Magician.js","webpack://ajs-diploma/./src/js/characters/Undead.js","webpack://ajs-diploma/./src/js/characters/Daemon.js","webpack://ajs-diploma/./src/js/characters/Vampire.js","webpack://ajs-diploma/./src/js/generators.js","webpack://ajs-diploma/./src/js/Team.js","webpack://ajs-diploma/./src/js/PositionedCharacter.js","webpack://ajs-diploma/./src/js/GameState.js","webpack://ajs-diploma/./src/js/app.js","webpack://ajs-diploma/./src/js/GameStateService.js","webpack://ajs-diploma/./src/js/GameController.js"],"sourcesContent":["import { calcHealthLevel, calcTileType } from './utils';\n\nexport default class GamePlay {\n  constructor() {\n    this.boardSize = 8;\n    this.container = null;\n    this.boardEl = null;\n    this.cells = [];\n    this.cellClickListeners = [];\n    this.cellEnterListeners = [];\n    this.cellLeaveListeners = [];\n    this.newGameListeners = [];\n    this.saveGameListeners = [];\n    this.loadGameListeners = [];\n  }\n\n  bindToDOM(container) {\n    if (!(container instanceof HTMLElement)) {\n      throw new Error('container is not HTMLElement');\n    }\n    this.container = container;\n  }\n\n  /**\n   * Draws boardEl with specific theme\n   *\n   * @param theme\n   */\n  drawUi(theme) {\n    this.checkBinding();\n\n    this.container.innerHTML = `\n      <div class=\"controls\">\n        <button data-id=\"action-restart\" class=\"btn\">New Game</button>\n        <button data-id=\"action-save\" class=\"btn\">Save Game</button>\n        <button data-id=\"action-load\" class=\"btn\">Load Game</button>\n      </div>\n      <div class=\"board-container\">\n        <div data-id=\"board\" class=\"board\"></div>\n      </div>\n    `;\n\n    this.newGameEl = this.container.querySelector('[data-id=action-restart]');\n    this.saveGameEl = this.container.querySelector('[data-id=action-save]');\n    this.loadGameEl = this.container.querySelector('[data-id=action-load]');\n\n    this.newGameEl.addEventListener('click', (event) => this.onNewGameClick(event));\n    this.saveGameEl.addEventListener('click', (event) => this.onSaveGameClick(event));\n    this.loadGameEl.addEventListener('click', (event) => this.onLoadGameClick(event));\n\n    this.boardEl = this.container.querySelector('[data-id=board]');\n\n    this.boardEl.classList.add(theme);\n    for (let i = 0; i < this.boardSize ** 2; i += 1) {\n      const cellEl = document.createElement('div');\n      cellEl.classList.add('cell', 'map-tile', `map-tile-${calcTileType(i, this.boardSize)}`);\n      cellEl.addEventListener('mouseenter', (event) => this.onCellEnter(event));\n      cellEl.addEventListener('mouseleave', (event) => this.onCellLeave(event));\n      cellEl.addEventListener('click', (event) => this.onCellClick(event));\n      this.boardEl.appendChild(cellEl);\n    }\n\n    this.cells = Array.from(this.boardEl.children);\n  }\n\n  /**\n   * Draws positions (with chars) on boardEl\n   *\n   * @param positions array of PositionedCharacter objects\n   */\n  redrawPositions(positions) {\n    for (const cell of this.cells) {\n      cell.innerHTML = '';\n    }\n\n    for (const position of positions) {\n      const cellEl = this.boardEl.children[position.position];\n      const charEl = document.createElement('div');\n      charEl.classList.add('character', position.character.type);\n\n      const healthEl = document.createElement('div');\n      healthEl.classList.add('health-level');\n\n      const healthIndicatorEl = document.createElement('div');\n      healthIndicatorEl.classList.add('health-level-indicator', `health-level-indicator-${calcHealthLevel(position.character.health)}`);\n      healthIndicatorEl.style.width = `${position.character.health}%`;\n      healthEl.appendChild(healthIndicatorEl);\n\n      charEl.appendChild(healthEl);\n      cellEl.appendChild(charEl);\n    }\n  }\n\n  /**\n   * Add listener to mouse enter for cell\n   *\n   * @param callback\n   */\n  addCellEnterListener(callback) {\n    this.cellEnterListeners.push(callback);\n  }\n\n  /**\n   * Add listener to mouse leave for cell\n   *\n   * @param callback\n   */\n  addCellLeaveListener(callback) {\n    this.cellLeaveListeners.push(callback);\n  }\n\n  /**\n   * Add listener to mouse click for cell\n   *\n   * @param callback\n   */\n  addCellClickListener(callback) {\n    this.cellClickListeners.push(callback);\n  }\n\n  /**\n   * Add listener to \"New Game\" button click\n   *\n   * @param callback\n   */\n  addNewGameListener(callback) {\n    this.newGameListeners.push(callback);\n  }\n\n  /**\n   * Add listener to \"Save Game\" button click\n   *\n   * @param callback\n   */\n  addSaveGameListener(callback) {\n    this.saveGameListeners.push(callback);\n  }\n\n  /**\n   * Add listener to \"Load Game\" button click\n   *\n   * @param callback\n   */\n  addLoadGameListener(callback) {\n    this.loadGameListeners.push(callback);\n  }\n\n  onCellEnter(event) {\n    event.preventDefault();\n    const index = this.cells.indexOf(event.currentTarget);\n    this.cellEnterListeners.forEach((o) => o.call(null, index));\n  }\n\n  onCellLeave(event) {\n    event.preventDefault();\n    const index = this.cells.indexOf(event.currentTarget);\n    this.cellLeaveListeners.forEach((o) => o.call(null, index));\n  }\n\n  onCellClick(event) {\n    const index = this.cells.indexOf(event.currentTarget);\n    this.cellClickListeners.forEach((o) => o.call(null, index));\n  }\n\n  onNewGameClick(event) {\n    event.preventDefault();\n    this.newGameListeners.forEach((o) => o.call(null));\n  }\n\n  onSaveGameClick(event) {\n    event.preventDefault();\n    this.saveGameListeners.forEach((o) => o.call(null));\n  }\n\n  onLoadGameClick(event) {\n    event.preventDefault();\n    this.loadGameListeners.forEach((o) => o.call(null));\n  }\n\n  static showError(message) {\n    alert(message);\n  }\n\n  static showMessage(message) {\n    alert(message);\n  }\n\n  selectCell(index, color) {\n    this.deselectCell(index);\n    this.cells[index].classList.add('selected', `selected-${color}`);\n  }\n\n  deselectCell(index) {\n    if (index || index === 0) {\n      const cell = this.cells[index];\n      cell.classList.remove(...Array.from(cell.classList)\n        .filter((o) => o.startsWith('selected')));\n    }\n  }\n\n  showCellTooltip(message, index) {\n    this.cells[index].title = message;\n  }\n\n  hideCellTooltip(index) {\n    this.cells[index].title = '';\n  }\n\n  showDamage(index, damage) {\n    return new Promise((resolve) => {\n      const cell = this.cells[index];\n      const damageEl = document.createElement('span');\n      damageEl.textContent = damage;\n      damageEl.classList.add('damage');\n      cell.appendChild(damageEl);\n\n      damageEl.addEventListener('animationend', () => {\n        cell.removeChild(damageEl);\n        resolve();\n      });\n    });\n  }\n\n  setCursor(cursor) {\n    this.boardEl.style.cursor = cursor;\n  }\n\n  checkBinding() {\n    if (this.container === null) {\n      throw new Error('GamePlay not bind to DOM');\n    }\n  }\n}\n","/**\n * @todo\n * @param index - –∏–Ω–¥–µ–∫—Å –ø–æ–ª—è\n * @param boardSize - —Ä–∞–∑–º–µ—Ä –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–≥–æ –ø–æ–ª—è (–≤ –¥–ª–∏–Ω—É –∏–ª–∏ —à–∏—Ä–∏–Ω—É)\n * @returns —Å—Ç—Ä–æ–∫–∞ - —Ç–∏–ø —è—á–µ–π–∫–∏ –Ω–∞ –ø–æ–ª–µ:\n *\n * top-left\n * top-right\n * top\n * bottom-left\n * bottom-right\n * bottom\n * right\n * left\n * center\n *\n * @example\n * ```js\n * calcTileType(0, 8); // 'top-left'\n * calcTileType(1, 8); // 'top'\n * calcTileType(63, 8); // 'bottom-right'\n * calcTileType(7, 7); // 'left'\n * ```\n * */\nexport function calcTileType(index, boardSize) {\n  // TODO: –≤–∞—à –∫–æ–¥ –±—É–¥–µ—Ç —Ç—É—Ç\n  if (index === 0) {\n    return 'top-left';\n  }\n\n  if (index > 0 && index < 7) {\n    return 'top';\n  }\n\n  if (index === 7) {\n    return 'top-right';\n  }\n\n  if (index === 56) {\n    return 'bottom-left';\n  }\n\n  if (index === 63) {\n    return 'bottom-right';\n  }\n\n  if (index > 56 && index < 63) {\n    return 'bottom';\n  }\n\n  if (index % boardSize === 0) {\n    return 'left';\n  }\n\n  if (index % boardSize === 7) {\n    return 'right';\n  }\n\n  return 'center';\n}\n\nexport function calcHealthLevel(health) {\n  if (health < 15) {\n    return 'critical';\n  }\n\n  if (health < 50) {\n    return 'normal';\n  }\n\n  return 'high';\n}\n","const themes = {\n  prairie: 'prairie',\n  desert: 'desert',\n  arctic: 'arctic',\n  mountain: 'mountain',\n};\n\nexport default themes;\n","const cursors = {\n  auto: 'auto',\n  pointer: 'pointer',\n  crosshair: 'crosshair',\n  notallowed: 'not-allowed',\n};\n\nexport default cursors;\n","/**\n * –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å, –æ—Ç –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞—Å–ª–µ–¥—É—é—Ç—Å—è –∫–ª–∞—Å—Å—ã –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π\n * @property level - —É—Ä–æ–≤–µ–Ω—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞, –æ—Ç 1 –¥–æ 4\n * @property attack - –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å –∞—Ç–∞–∫–∏\n * @property defence - –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å –∑–∞—â–∏—Ç—ã\n * @property health - –∑–¥–æ—Ä–æ–≤—å–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞\n * @property type - —Å—Ç—Ä–æ–∫–∞ —Å –æ–¥–Ω–∏–º –∏–∑ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π:\n * swordsman\n * bowman\n * magician\n * daemon\n * undead\n * vampire\n */\nexport default class Character {\n  constructor(level, type) {\n    this.level = level;\n    this.attack = 0;\n    this.defence = 0;\n    this.health = 50;\n    this.type = type;\n    // TODO: –≤—ã–±—Ä–æ—Å–∏—Ç–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –µ—Å–ª–∏ –∫—Ç–æ-—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç \"new Character()\"\n    if (new.target.name === 'Character') {\n      throw new Error('–ù–µ–ª—å–∑—è –Ω–∞–ø—Ä—è–º—É—é –≤—ã–∑—ã–≤–∞—Ç—å –∫–ª–∞—Å—Å Character');\n    }\n  }\n}\n","import Character from '../Character';\n\nexport default class Bowman extends Character {\n  constructor(level, type) {\n    super(level, type);\n    this.attack = 25;\n    this.defence = 25;\n  }\n}\n","import Character from '../Character';\n\nexport default class Swordsman extends Character {\n  constructor(level, type) {\n    super(level, type);\n    this.attack = 40;\n    this.defence = 10;\n  }\n}\n","import Character from '../Character';\n\nexport default class Magician extends Character {\n  constructor(level, type) {\n    super(level, type);\n    this.attack = 10;\n    this.defence = 40;\n  }\n}\n","import Character from '../Character';\n\nexport default class Undead extends Character {\n  constructor(level, type) {\n    super(level, type);\n    this.attack = 40;\n    this.defence = 10;\n  }\n}\n","import Character from '../Character';\n\nexport default class Daemon extends Character {\n  constructor(level, type) {\n    super(level, type);\n    this.attack = 10;\n    this.defence = 10;\n  }\n}\n","import Character from '../Character';\n\nexport default class Vampire extends Character {\n  constructor(level, type) {\n    super(level, type);\n    this.attack = 25;\n    this.defence = 25;\n  }\n}\n","import Bowman from './characters/Bowman';\nimport Swordsman from './characters/Swordsman';\nimport Magician from './characters/Magician';\nimport Undead from './characters/Undead';\nimport Daemon from './characters/Daemon';\nimport Vampire from './characters/Vampire';\n\n/**\n * –§–æ—Ä–º–∏—Ä—É–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –∏–∑ –º–∞—Å—Å–∏–≤–∞ allowedTypes —Å–æ\n * —Å–ª—É—á–∞–π–Ω—ã–º —É—Ä–æ–≤–Ω–µ–º –æ—Ç 1 –¥–æ maxLevel\n *\n * @param allowedTypes –º–∞—Å—Å–∏–≤ –∫–ª–∞—Å—Å–æ–≤\n * @param maxLevel –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑–º–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞\n * @returns –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ\n * –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞\n *\n */\nexport function* characterGenerator(allowedTypes, maxLevel) {\n  // TODO: write logic here\n  const rndInd = Math.floor(Math.random() * allowedTypes.length);\n  const rndLvl = Math.floor(Math.random() * maxLevel) + 1;\n  const typeOfCharacter = allowedTypes[rndInd];\n  if (typeOfCharacter === 'Bowman') {\n    yield new Bowman(rndLvl, 'bowman');\n  }\n\n  if (typeOfCharacter === 'Swordsman') {\n    yield new Swordsman(rndLvl, 'swordsman');\n  }\n\n  if (typeOfCharacter === 'Magician') {\n    yield new Magician(rndLvl, 'magician');\n  }\n\n  if (typeOfCharacter === 'Undead') {\n    yield new Undead(rndLvl, 'undead');\n  }\n\n  if (typeOfCharacter === 'Daemon') {\n    yield new Daemon(rndLvl, 'daemon');\n  }\n\n  if (typeOfCharacter === 'Vampire') {\n    yield new Vampire(rndLvl, 'vampire');\n  }\n}\n\n/**\n * –§–æ—Ä–º–∏—Ä—É–µ—Ç –º–∞—Å—Å–∏–≤ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ characterGenerator\n * @param allowedTypes –º–∞—Å—Å–∏–≤ –∫–ª–∞—Å—Å–æ–≤\n * @param maxLevel –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–æ–∑–º–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞\n * @param characterCount –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π, –∫–æ—Ç–æ—Ä–æ–µ –Ω—É–∂–Ω–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å\n * @returns —ç–∫–∑–µ–º–ø–ª—è—Ä Team, —Ö—Ä–∞–Ω—è—â–∏–π —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π.\n * –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –≤ –∫–æ–º–∞–Ω–¥–µ - characterCount\n * */\nexport default function generateTeam(allowedTypes, maxLevel, characterCount) {\n  // TODO: write logic here\n  const characters = [];\n  for (let i = 0; i < characterCount; i += 1) {\n    characters.push(characterGenerator(allowedTypes, maxLevel).next().value);\n  }\n  return characters;\n}\n\n/**\n * –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏\n * @param –ø–∞—Ä–∞–º–µ—Ç—Ä –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ –∫ –∫–æ–º–∞–Ω–¥–µ –∏–≥—Ä–æ–∫–∞ –∏–ª–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞\n * @usedPositions –º–∞—Å—Å–∏–≤ –∑–∞–Ω—è—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π\n * –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—É—é –ø–æ–∑–∏—Ü–∏—é\n * –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –ø–æ–∑–∏—Ü–∏–π —É –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π\n */\nexport function generatePosition(player, usedPositions) {\n  let index = 0; // —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ–π —Ä–∞—Å—Å—Ç–∞–Ω–æ–≤–∫–µ –∫–æ–º–∞–Ω–¥\n  const allowedPositions = []; // –º–∞—Å—Å–∏–≤ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π\n\n  if (player !== 'player' && player !== 'computer') {\n    throw new Error('–ü–∞—Ä–∞–º–µ—Ç—Ä –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–π –≤ —Ñ—É–Ω–∫—Ü–∏—é generatePosition() –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å \"Player\" –ª–∏–±–æ \"Computer\"');\n  }\n  if (player === 'player') {\n    index = 0;\n  }\n  if (player === 'computer') {\n    index = 6;\n  }\n\n  for (let i = 0; i < 8; i += 1) {\n    if (!usedPositions.includes((i * 8) + index)) {\n      allowedPositions.push((i * 8) + index);\n    }\n    if (!usedPositions.includes((i * 8) + index + 1)) {\n      allowedPositions.push((i * 8) + index + 1);\n    }\n  }\n  const randomPozition = Math.floor(Math.random() * allowedPositions.length);\n  return allowedPositions[randomPozition];\n}\n\n/**\n * –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π –¥–ª—è –∞—Ç–∞–∫–∏\n * @range –ø–∞—Ä–∞–º–µ—Ç—Ä –¥–∞–ª—å–Ω–æ—Å—Ç–∏ –∞—Ç–∞–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞\n * @index –ø–æ–∑–∏—Ü–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞\n * –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –¥–ª—è –∞—Ç–∞–∫–∏\n */\nfunction getAttackRange(range, index) {\n  const rangeList = [];\n  const limitRow = [];\n  const limitColumn = [];\n  let position;\n\n  // –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–ø—Ä–∞–≤–∞ –∏ —Å–ª–µ–≤–∞\n  for (let i = (index % 8) - range; i <= (index % 8) + range; i += 1) {\n    if (i >= 0 && i < 8) {\n      limitRow.push(i);\n    }\n  }\n\n  // –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–Ω—É–∑—É –∏ —Å–≤–µ—Ä—Ö—É\n  for (let i = Math.floor(index / 8) - range; i <= Math.floor(index / 8) + range; i += 1) {\n    if (i >= 0 && i < 8) {\n      limitColumn.push(i);\n    }\n  }\n\n  for (let i = -range; i < range + 1; i += 1) {\n    for (let j = -range; j < range + 1; j += 1) {\n      position = index + i * 8 + j;\n      if (position !== index // –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞\n      && !rangeList.includes(position) // –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –∑–Ω–∞—á–µ–Ω–∏–π\n      && position >= 0 // –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–≤–µ—Ä—Ö—É –ø–æ–ª—è\n      && position < 64 // –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–Ω–∏–∑—É –ø–æ–ª—è\n      && limitRow.indexOf(position % 8) >= 0 // –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–ª–µ–≤–∞ –∏ —Å–ø—Ä–∞–≤–∞\n      && limitColumn.indexOf(Math.floor(position / 8)) >= 0) { // –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–≤–µ—Ä—Ö—É –∏ —Å–Ω–∏–∑—É\n        rangeList.push(position);\n      }\n    }\n  }\n  return rangeList;\n}\n\n/**\n * –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π –¥–ª—è –∞—Ç–∞–∫–∏\n * @char –ø–∞—Ä–∞–º–µ—Ç—Ä –ø–µ—Ä—Å–æ–Ω–∞–∂–∞\n * @index –ø–æ–∑–∏—Ü–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞\n * –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –¥–ª—è –∞—Ç–∞–∫–∏\n */\nexport function getPositionsToAttack(char, index) {\n  let positionsToAttack = [];\n  if (char === 'swordsman' || char === 'undead') {\n    positionsToAttack = getAttackRange(1, index);\n  }\n  if (char === 'bowman' || char === 'vampire') {\n    positionsToAttack = getAttackRange(2, index);\n  }\n  if (char === 'magician' || char === 'daemon') {\n    positionsToAttack = getAttackRange(4, index);\n  }\n  return positionsToAttack;\n}\n\n/**\n * –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π –¥–ª—è —Ö–æ–¥–∞\n * @range –ø–∞—Ä–∞–º–µ—Ç—Ä –¥–∞–ª—å–Ω–æ—Å—Ç–∏ –∞—Ç–∞–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞\n * @index –ø–æ–∑–∏—Ü–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞\n * @characterList  –º–∞—Å—Å–∏–≤ –∑–∞–Ω—è—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π\n * –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –¥–ª—è —Ö–æ–¥–∞\n */\nfunction getMoveRange(range, index, characterList) {\n  const usedPositions = characterList.map((item) => item.position);\n  const rangeList = [];\n  const limitRow = [];\n  const limitColumn = [];\n  let position = 0;\n\n  // –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–ø—Ä–∞–≤–∞ –∏ —Å–ª–µ–≤–∞\n  for (let i = (index % 8) - range; i <= (index % 8) + range; i += 1) {\n    if (i >= 0 && i < 8) {\n      limitRow.push(i);\n    }\n  }\n\n  // –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–Ω—É–∑—É –∏ —Å–≤–µ—Ä—Ö—É\n  for (let i = Math.floor(index / 8) - range; i <= Math.floor(index / 8) + range; i += 1) {\n    if (i >= 0 && i < 8) {\n      limitColumn.push(i);\n    }\n  }\n\n  for (let i = -range; i < range + 1; i += 1) {\n    const x = i === 0 ? range : Math.abs(i);\n    const y = i === 0 ? 1 : Math.abs(i);\n    for (let j = -x; j < x + 1; j += y) {\n      position = index + i * 8 + j;\n      if (position !== index // –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞\n      && !usedPositions.includes(position) // –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –∑–∞–Ω—è—Ç–æ–≥–æ –ø–æ–ª—è\n      && Math.floor(position / 8) === Math.floor(index / 8) + i\n      && position >= 0 // –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–≤–µ—Ä—Ö—É –ø–æ–ª—è\n      && position < 64 // –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–Ω–∏–∑—É –ø–æ–ª—è\n      // && position >= index - (range * 8) - range\n      // && position <= index + (range * 8) + range\n      && limitRow.indexOf(position % 8) >= 0 // –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–ª–µ–≤–∞ –∏ —Å–ø—Ä–∞–≤–∞\n      && limitColumn.indexOf(Math.floor(position / 8)) >= 0) { // –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–≤–µ—Ä—Ö—É –∏ —Å–Ω–∏–∑—É\n      // && limit.indexOf(position % 8) >= 0) { // –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–ª–µ–≤–∞ –∏ —Å–ø—Ä–∞–≤–∞ –ø–æ–ª—è\n        rangeList.push(position);\n      }\n    }\n  }\n  return rangeList;\n}\n\nexport function getPositionsToMove(char, index, characterList) {\n  let positionsToMove = [];\n  if (char === 'swordsman' || char === 'undead') {\n    positionsToMove = getMoveRange(4, index, characterList);\n  }\n  if (char === 'bowman' || char === 'vampire') {\n    positionsToMove = getMoveRange(2, index, characterList);\n  }\n  if (char === 'magician' || char === 'daemon') {\n    positionsToMove = getMoveRange(1, index, characterList);\n  }\n  return positionsToMove;\n}\n\nexport function createCharacter(level, type) {\n  if (type === 'bowman') {\n    return new Bowman(level, 'bowman');\n  }\n  if (type === 'swordsman') {\n    return new Swordsman(level, 'swordsman');\n  }\n  if (type === 'magician') {\n    return new Magician(level, 'magician');\n  }\n  if (type === 'undead') {\n    return new Undead(level, 'undead');\n  }\n  if (type === 'vampire') {\n    return new Vampire(level, 'vampire');\n  }\n  if (type === 'daemon') {\n    return new Daemon(level, 'daemon');\n  }\n}\n","/**\n * –ö–ª–∞—Å—Å, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–π –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –∫–æ–º–∞–Ω–¥—ã\n *\n * @todo –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–¥—É–º–∞–π—Ç–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –≤ –∫–ª–∞—Å—Å–µ\n * –ù–∞–ø—Ä–∏–º–µ—Ä\n * @example\n * ```js\n * const characters = [new Swordsman(2), new Bowman(1)]\n * const team = new Team(characters);\n *\n * team.characters // [swordsman, bowman]\n * ```\n * */\nexport default class Team {\n  // TODO: write your logic here\n  constructor(characters) {\n    this.characters = characters;\n  }\n\n  * [Symbol.iterator]() {\n    let i = 0;\n    while (i < this.characters.length) {\n      yield this.characters[i];\n      i += 1;\n    }\n  }\n}\n","import Character from './Character';\n\nexport default class PositionedCharacter {\n  constructor(character, position) {\n    if (!(character instanceof Character)) {\n      throw new Error('character must be instance of Character or its children');\n    }\n\n    if (typeof position !== 'number') {\n      throw new Error('position must be a number');\n    }\n\n    this.character = character;\n    this.position = position;\n  }\n}\n","export default class GameState {\n  constructor() {\n    this.running = true;\n    this.level = 1;\n    this.turn = 'player';\n    this.selectedCell = null;\n    this.selectedCharacter = '';\n  }\n\n  changeTurn() {\n    this.turn = this.turn === 'player' ? 'computer' : 'player';\n  }\n}\n","/**\n * Entry point of app: don't change this\n */\nimport GamePlay from './GamePlay';\nimport GameController from './GameController';\nimport GameStateService from './GameStateService';\n\nconst gamePlay = new GamePlay();\ngamePlay.bindToDOM(document.querySelector('#game-container'));\n\nconst stateService = new GameStateService(localStorage);\n\nconst gameCtrl = new GameController(gamePlay, stateService);\ngameCtrl.init();\n\n// don't write your code here\n","export default class GameStateService {\n  constructor(storage) {\n    this.storage = storage;\n  }\n\n  save(state) {\n    this.storage.setItem('state', JSON.stringify(state));\n  }\n\n  load() {\n    try {\n      return JSON.parse(this.storage.getItem('state'));\n    } catch (e) {\n      throw new Error('Invalid state');\n    }\n  }\n}\n","import themes from './themes';\nimport cursor from './cursors';\nimport generateTeam from './generators';\nimport { generatePosition, getPositionsToAttack, getPositionsToMove, createCharacter } from './generators';\nimport Team from './Team';\nimport PositionedCharacter from './PositionedCharacter';\nimport GameState from './GameState';\nimport GamePlay from './GamePlay';\nimport Bowman from './characters/Bowman';\n\nexport default class GameController {\n  \n  constructor(gamePlay, stateService) {\n    this.gamePlay = gamePlay;\n    this.stateService = stateService;\n    this.gameState = new GameState();\n    this.characterList = [];\n  }\n\n  init() { \n    this.startNewGame();\n    // –ø–æ–¥–ø–∏—à–µ–º –∫–ª–µ—Ç–∫–∏ –Ω–∞ —Å–æ–±—ã—Ç–∏—è –º—ã—à–∏\n    this.gamePlay.addCellEnterListener(this.onCellEnter.bind(this));\n    this.gamePlay.addCellLeaveListener(this.onCellLeave.bind(this));\n    this.gamePlay.addCellClickListener(this.onCellClick.bind(this));\n    // –ø–æ–¥–ø–∏—à–µ–º –∫–Ω–æ–ø–∫–∏ –Ω–∞ –Ω–∞–∂–∞—Ç–∏—è\n    this.gamePlay.addNewGameListener(this.startNewGame.bind(this));\n    this.gamePlay.addSaveGameListener(this.saveGame.bind(this));\n    this.gamePlay.addLoadGameListener(this.loadGame.bind(this));\n  }\n\n  onCellClick(index) { // react to click\n    if (this.gameState.running) { // –µ—Å–ª–∏ –∏–≥—Ä–∞ –∑–∞–ø—É—â–µ–Ω–∞\n      // –≤—ã–±–æ—Ä –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –Ω–∞ –∫–ª–µ—Ç–∫–µ\n      const char = this.characterList.find(item => item.position === index);\n      const positionToMove = getPositionsToMove(this.gameState.selectedCharacter, this.gameState.selectedCell, this.characterList);\n      if (char) {\n        const positionToAttack = getPositionsToAttack(this.gameState.selectedCharacter, this.gameState.selectedCell);\n        if (char.character.type === 'bowman' ||\n            char.character.type === 'swordsman' ||\n            char.character.type === 'magician') {\n              this.gamePlay.deselectCell(this.gameState.selectedCell);\n              this.gamePlay.selectCell(index, 'yellow');\n              this.gameState.selectedCharacter = char.character.type;\n              this.gameState.selectedCell = index;\n        } else if (positionToAttack.indexOf(index) >= 0) {\n          let attacker = this.characterList.find(item => item.position === this.gameState.selectedCell).character;\n          let target = char.character;\n          let damage = Math.max((attacker.attack - target.defence) * 0.2, attacker.attack * 0.1);\n          damage = Math.floor(damage);\n          target.health -= damage;\n          if (target.health < 1) {\n            // this.computerTeam.length -= 1;\n            this.characterList = this.characterList.filter(item => item.position !== index);\n\n          } \n          this.gamePlay.redrawPositions(this.characterList);\n          if (this.teamSize('computer') === 0) {\n            if (this.gameState.level === 4) {\n              this.gameState.running = false;\n              GamePlay.showMessage('–ü–æ–±–µ–¥–∞ –≤–∞—à–∞');\n              return;\n            }\n            this.gameState.level += 1;\n            this.levelUp();\n            this.gameState.selectedCell = null;\n            this.gameState.selectedCharacter = '';\n            this.startNextLevel();\n          }\n          this.gameState.running = false\n          this.gamePlay.showDamage(index, damage).then(() => {\n            setTimeout(() => {\n              this.gameState.changeTurn();\n              this.gameState.running = true;\n              this.enemyTurn();\n            }, 50);\n          \n          });\n        }\n        else {\n          GamePlay.showError('–ú–æ–∂–Ω–æ –≤—ã–¥–µ–ª—è—Ç—å —Ç–æ–ª—å–∫–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –∏–≥—Ä–æ–∫–∞');\n        }\n      } else if (positionToMove.indexOf(index) >= 0) {\n        this.characterList.map(item => {\n          if (item.position === this.gameState.selectedCell) {\n            item.position = index;\n            this.gamePlay.deselectCell(this.gameState.selectedCell);\n            this.gameState.selectedCell = index;\n            this.gamePlay.selectCell(index, 'yellow');\n          }\n        })\n        this.gamePlay.redrawPositions(this.characterList);\n        this.enemyTurn();\n      } else { \n        GamePlay.showError('–ü—É—Å—Ç–∞—è –∫–ª–µ—Ç–∫–∞');\n      }\n    }\n  }\n\n  onCellEnter(index) { // react to mouse \n    if (this.gameState.running) {\n      const char = this.characterList.find(item => item.position === index);\n      if (char) {\n        this.gamePlay.setCursor(cursor.pointer);\n        const message = this.characterInf(char.character);\n        // `üéñÔ∏è${char.character.level}‚öî${char.character.attack}üõ°${char.character.defence}‚ù§${char.character.health}`;\n        this.gamePlay.showCellTooltip(message, index);\n        const positionsToAttack = getPositionsToAttack(this.gameState.selectedCharacter, this.gameState.selectedCell);\n        if (char.character.type === 'undead' || \n            char.character.type === 'vampire' || \n            char.character.type === 'daemon') {\n          if (positionsToAttack.indexOf(index) >= 0) {\n            this.gamePlay.setCursor(cursor.crosshair);\n          } else {\n            this.gamePlay.setCursor(cursor.notallowed);\n          }\n        } \n      } else {\n        const positionToMove = getPositionsToMove(this.gameState.selectedCharacter, this.gameState.selectedCell, this.characterList);\n        if (positionToMove.indexOf(index) >= 0) {\n          this.gamePlay.selectCell(index, 'green');\n        }\n      }\n    }\n  }\n\n  onCellLeave(index) { // react to mouse leave\n    this.gamePlay.hideCellTooltip(index);\n    this.gamePlay.setCursor(cursor.auto);\n    if (index !== this.gameState.selectedCell) {\n      this.gamePlay.deselectCell(index);\n    }\n  }\n\n  startNewGame() { // —Å—Ç–∞—Ä—Ç –Ω–æ–≤–æ–π –∏–≥—Ä—ã\n    this.clearAll();\n    this.startNextLevel();\n  }\n\n  saveGame() { // —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–≥—Ä—ã\n    const state = {};\n    state.running = this.gameState.running;\n    state.level = this.gameState.level;\n    state.turn = this.gameState.turn;\n    state.selectedCell = this.gameState.selectedCell;\n    state.selectedCharacter = this.gameState.selectedCharacter;\n    // state.playerTeam = this.playerTeam;\n    // state.computerTeam = this.computerTeam;\n    state.characterList = this.characterList;\n    this.stateService.save(state);\n    GamePlay.showMessage('Game is saved');\n  }\n\n  loadGame() { // –∑–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—É—é –∏–≥—Ä—É\n    try {\n      const state = this.stateService.load();\n      this.gameState.running = state.running;\n      this.gameState.level = state.level;\n      this.gameState.turn = state.turn;\n      this.gamePlay.deselectCell(this.gameState.selectedCell);\n      this.gameState.selectedCell = state.selectedCell;\n      if (this.gameState.selectedCell) {\n        this.gamePlay.selectCell(this.gameState.selectedCell, 'yellow');\n      }\n      this.gameState.selectedCharacter = state.selectedCharacter;\n      this.characterList = []; // –æ–±–Ω—É–ª—è–µ–º –º–∞—Å—Å–∏–≤ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∏–≥—Ä–æ–∫–æ–≤\n      // –≤–≤–æ–¥–∏–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤ —á—Ç–æ–±—ã –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π\n      const tempArr = state.characterList;\n      tempArr.map(char => {\n        const character = createCharacter(char.character.level, char.character.type);\n        character.attack = char.character.attack;\n        character.defence = char.character.defence;\n        character.health = char.character.health;\n        const positionedCharacter = new PositionedCharacter(character, char.position);\n        this.characterList.push(positionedCharacter);\n      });\n      this.drawingPlan(this.gameState.level);\n      this.gamePlay.redrawPositions(this.characterList);\n      GamePlay.showMessage('–ò–≥—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');\n    } \n    catch {\n      GamePlay.showError('–ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–π –∏–≥—Ä—ã');\n    }\n  }\n\n  clearAll() { // –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤\n    this.playerTeam = [];\n    this.computerTeam = [];\n    this.characterList = [];\n    this.gameState.level = 1;\n    this.gameState.running = true;\n  }\n\n  startNextLevel() { // —Å—Ç–∞—Ä—Ç –Ω–æ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è\n    this.drawingPlan(this.gameState.level); // –æ—Ç—Ä–∏—Å—É–µ–º –ø–æ–ª–µ\n    this.generateNewTeam('player'); // —Å–æ–∑–¥–∞—ë–º –∫–æ–º–∞–Ω–¥—É –∏–≥—Ä–æ–∫–∞\n    this.generateNewTeam('computer'); // —Å–æ–∑–¥–∞—ë–º –∫–æ–º–∞–Ω–¥—É –∫–æ–º–ø—å—é—Ç–µ—Ä–∞\n    this.positionTeam('player');\n    this.positionTeam('computer');\n    this.drawingCharacters();\n  }\n\n  drawingPlan(level) { // –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø–æ–ª—è\n    let theme = '';\n    if (level === 1) {\n      theme = themes.prairie;\n    }\n    if (level === 2) {\n      theme = themes.desert;\n    }\n    if (level === 3) {\n      theme = themes.arctic;\n    }\n    if (level === 4) {\n      theme = themes.mountain;\n    }\n    this.gamePlay.drawUi(theme);\n  }\n\n  generateNewTeam(player) { // —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã\n    if (player === 'player') {\n      const arr = this.characterList.map(item => item); // –≤—Ä–µ–º–µ–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤\n      this.playerTeam = [];\n      for (let char of arr) {\n        if (char.character.type === 'bowman' ||\n            char.character.type === 'swordsman' ||\n            char.character.type === 'magician') {\n              this.playerTeam.push(char.character);\n              this.characterList.shift();\n        }\n      }\n      const number = this.gameState.level + 1 - this.playerTeam.length;\n      if (number) {\n        const team = generateTeam(['Bowman', 'Swordsman', 'Magician'], 1, number);\n        this.playerTeam = this.playerTeam.concat(...team);\n      }\n    }\n    if (player === 'computer') {\n      const arr = this.characterList.map(item => item); // –≤—Ä–µ–º–µ–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤\n      this.computerTeam = [];\n      for (let char of arr) {\n        if (char.character.type === 'undead' ||\n            char.character.type === 'vampire' ||\n            char.character.type === 'daemon') {\n              this.computerTeam.push(char.character);\n              this.characterList.shift();\n        }\n      }\n      const number = this.gameState.level + 1 - this.computerTeam.length;\n      if (number) {\n        const team = generateTeam(['Undead', 'Daemon', 'Vampire'], 1, number);\n        this.computerTeam = this.computerTeam.concat(team);\n      }\n    }\n  }\n\n  positionTeam(player) { // —Ä–∞—Å—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–º–∞–Ω–¥—ã\n    const team = player === 'player' ? this.playerTeam : this.computerTeam;\n    const usedPositions = []; // –º–∞—Å—Å–∏–≤ –∑–∞–Ω—è—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π\n    for (let char of team) {\n      // —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—É—é –ø–æ–∑–∏—Ü–∏—é\n      const position = generatePosition(player, usedPositions);\n      // –ø–æ–ª–æ–∂–∏–º —ç—Ç—É –ø–æ–∑–∏—Ü–∏—é –≤ –º–∞—Å—Å–∏–≤ –∑–∞–Ω—è—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π\n      usedPositions.push(position);\n      // —Å–æ–∑–¥–∞–¥–∏–º –æ–±—ä–µ–∫—Ç —Ç–∏–ø–∞ PositionedCharacter –∏ –ø–æ–ª–æ–∂–∏–º –µ–≥–æ –≤ –º–∞—Å—Å–∏–≤\n      const positionedCharacter = new PositionedCharacter(char, position);\n      this.characterList.push(positionedCharacter);\n    }\n  }\n\n  drawingCharacters() { // –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π\n    this.gamePlay.redrawPositions(this.characterList);\n  }\n\n  levelUp() {\n    let i = 0;\n    for (let item of this.characterList) {\n      const char = item.character;\n      char.level += 1;\n      char.attack = Math.max(char.attack, char.attack * (80 + char.health) / 100);\n      char.attack = Math.floor(char.attack);\n      char.defence = Math.max(char.defence, char.defence * (80 + char.health) / 100);\n      char.defence = Math.floor(char.defence);\n      char.health = char.health + 80 <= 100 ? char.health + 80 : 100;\n      item.character = char;\n      this.characterList[i] = item;\n      i++;\n    }\n  }\n\n  characterInf(character) {\n    return `üéñ${character.level} ‚öî${character.attack} üõ°${character.defence} ‚ù§${character.health}`;\n  }\n\n  teamSize(player) {\n    let size = 0;\n    if (player === 'player') {\n      for (const char of this.characterList) {\n        if (char.character.type === 'bowman' ||\n            char.character.type === 'swordsman' ||\n            char.character.type === 'magician') {\n          size += 1;\n        }\n      }\n      return size;\n    }\n    if (player === 'computer') {\n      for (const char of this.characterList) {\n        if (char.character.type === 'undead' ||\n            char.character.type === 'vampire' ||\n            char.character.type === 'daemon') {\n          size += 1;\n        }\n      }\n      return size;\n    }\n  }\n\n  enemyTurn() { // —Ö–æ–¥ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞\n    const playerTeam = [];\n    const computerTeam = [];\n    let maxDamage = {\n      damage: 0\n    };\n    for (let char of this.characterList) {\n      if (char.character.type === 'bowman' \n      || char.character.type === 'swordsman'\n      || char.character.type === 'magician') {\n        playerTeam.push(char);\n      }\n      if (char.character.type === 'undead'\n      || char.character.type === 'vampire'\n      || char.character.type === 'daemon') {\n        computerTeam.push(char);\n      }\n      for (const char of computerTeam) {\n            const attacker = char.character;\n            const attackerPosition = char.position;\n            \n            const positionsToAttack = getPositionsToAttack(char.character.type, char.position);\n            for (let char of playerTeam) {\n              if (positionsToAttack.indexOf(char.position) >= 0) {\n                let target = char.character;\n                let damage = Math.max((attacker.attack - target.defence) * 0.2, attacker.attack * 0.1);\n                damage = Math.floor(damage);\n                if (damage > maxDamage.damage) {\n                  maxDamage.damage = damage;\n                  maxDamage.attackerPosition = attackerPosition;\n                  maxDamage.defenderPosition = char.position;\n                }\n              }\n            }\n      }\n    }\n    if (maxDamage.damage > 0) {\n      const target = this.characterList.find(item => item.position === maxDamage.defenderPosition);\n      target.character.health -= maxDamage.damage;\n      if (target.character.health < 1) {\n        this.gameState.selectedCell = null;\n        this.gameState.selectedCharacter = '';\n        this.gamePlay.deselectCell(target.position);\n        this.characterList = this.characterList.filter(item => item.position !== target.position);\n      }\n      this.gameState.running = false;\n      this.gamePlay.showDamage(target.position, maxDamage.damage).then(() => \n      setTimeout(() => {\n        this.gameState.running = true;\n        this.gameState.changeTurn();\n        this.gamePlay.redrawPositions(this.characterList);\n        if(this.teamSize('player') === 0) {\n          if (this.gameState.level === 4) {\n            this.gameState.running = false;\n            GamePlay.showMessage('–ü–æ–±–µ–¥–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞');\n            return;\n          }\n          this.gameState.level += 1;\n          this.levelUp();\n          this.gameState.selectedCell = null;\n          this.gameState.selectedCharacter = '';\n          this.startNextLevel();\n        }\n      }, 100));\n      \n      return;\n    }  \n    let rnd = Math.floor(Math.random() * computerTeam.length);\n    const char = computerTeam[rnd];\n    const positionsToMove = getPositionsToMove(char.character.type, char.position, this.characterList);\n    rnd = Math.floor(Math.random() * positionsToMove.length);\n    char.position = positionsToMove[rnd];\n    this.gamePlay.redrawPositions(this.characterList);\n  }\n}\n"],"names":["GamePlay","constructor","this","boardSize","container","boardEl","cells","cellClickListeners","cellEnterListeners","cellLeaveListeners","newGameListeners","saveGameListeners","loadGameListeners","bindToDOM","HTMLElement","Error","drawUi","theme","checkBinding","innerHTML","newGameEl","querySelector","saveGameEl","loadGameEl","addEventListener","event","onNewGameClick","onSaveGameClick","onLoadGameClick","classList","add","i","cellEl","document","createElement","index","onCellEnter","onCellLeave","onCellClick","appendChild","Array","from","children","redrawPositions","positions","cell","position","charEl","character","type","healthEl","healthIndicatorEl","health","style","width","addCellEnterListener","callback","push","addCellLeaveListener","addCellClickListener","addNewGameListener","addSaveGameListener","addLoadGameListener","preventDefault","indexOf","currentTarget","forEach","o","call","static","message","alert","selectCell","color","deselectCell","remove","filter","startsWith","showCellTooltip","title","hideCellTooltip","showDamage","damage","Promise","resolve","damageEl","textContent","removeChild","setCursor","cursor","Character","level","attack","defence","name","Bowman","super","Swordsman","Magician","Undead","Daemon","Vampire","characterGenerator","allowedTypes","maxLevel","rndInd","Math","floor","random","length","rndLvl","typeOfCharacter","generateTeam","characterCount","characters","next","value","generatePosition","player","usedPositions","allowedPositions","includes","getAttackRange","range","rangeList","limitRow","limitColumn","j","getPositionsToAttack","char","positionsToAttack","getMoveRange","characterList","map","item","x","abs","y","getPositionsToMove","positionsToMove","Team","Symbol","iterator","PositionedCharacter","GameState","running","turn","selectedCell","selectedCharacter","changeTurn","gamePlay","stateService","storage","save","state","setItem","JSON","stringify","load","parse","getItem","e","localStorage","gameCtrl","gameState","init","startNewGame","bind","saveGame","loadGame","find","positionToMove","positionToAttack","attacker","target","max","teamSize","showMessage","levelUp","startNextLevel","then","setTimeout","enemyTurn","showError","characterInf","clearAll","positionedCharacter","drawingPlan","playerTeam","computerTeam","generateNewTeam","positionTeam","drawingCharacters","themes","arr","shift","number","team","concat","size","maxDamage","attackerPosition","defenderPosition","rnd"],"sourceRoot":""}